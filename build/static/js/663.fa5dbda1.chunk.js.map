{"version":3,"file":"static/js/663.fa5dbda1.chunk.js","mappings":"mSAyGA,UAhGc,WACV,IAAMA,GAAQC,EAAAA,EAAAA,KAAY,SAACC,GAAD,OAAWA,EAAMC,KAAKH,SAChD,GAAwBI,EAAAA,EAAAA,UAAS,MAAjC,eAAOC,EAAP,KAAaC,EAAb,KACA,GAAkCF,EAAAA,EAAAA,WAAS,GAA3C,eAAOG,EAAP,KAAkBC,EAAlB,KASMC,EAAU,mCAAG,2FACVJ,GAAqC,SAAzB,OAAJA,QAAI,IAAJA,OAAA,EAAAA,EAAMK,KAAKC,MAAM,KAAK,IADpB,uBAEXH,GAAa,GAFF,2CAMLI,EAAW,IAAIC,UACZC,OAAO,OAAQT,GAPb,SAQYU,IAAAA,KAAA,UAAcC,EAAAA,EAAd,qCAA0DJ,EAAU,CACvFK,QAAS,CACLC,cAAe,UAAYlB,KAVxB,gBAQHmB,EARG,EAQHA,KAKRC,EAAAA,GAAAA,QAAcD,EAAKA,KAAKE,SACxBf,EAAQ,MAdG,kDAgBXgB,QAAQC,IAAR,MAhBW,0DAAH,qDAoBVC,EAAc,mCAAG,uBAAAC,EAAA,0FAEQV,IAAAA,IAAA,UAAaC,EAAAA,EAAb,kEAAsF,CACzGU,aAAc,cACdT,QAAS,CACLC,cAAc,UAAD,OAAYlB,MALlB,OAET2B,EAFS,OAQfL,QAAQC,IAAII,EAASR,MACfS,EAAO,IAAIC,KAAK,CAACF,EAASR,MAAO,CAAEW,KAAM,6BAGzCC,EAAMC,OAAOC,IAAIC,gBAAgBN,IAGjCH,EAAIU,SAASC,cAAc,MAC/BC,MAAMC,QAAU,OAClBb,EAAEc,KAAOR,EACTN,EAAEe,SAAW,2CACbL,SAASM,KAAKC,YAAYjB,GAC1BA,EAAEkB,QAGFX,OAAOC,IAAIW,gBAAgBb,GAvBZ,kDAyBfT,QAAQuB,MAAM,mCAAd,MAzBe,0DAAH,qDA6BpB,OACI,UAAC,KAAD,CAAMP,QAAQ,OAAOQ,eAAgB,SAAUC,WAAY,SAAUC,IAAK,OAA1E,WACI,6BACI,sDAEA,SAAC,IAAD,CACIC,GAAI,CAAEC,UAAW,QACjBC,GAAG,gBACHzC,KAAK,gBACL0C,MAAM,cACNtB,KAAK,OAMLuB,aAAa,aACbC,SAAS,EACTT,MAAOtC,EACPgD,SA5EG,SAACC,GACoC,QAAhDA,EAAEC,cAAcC,MAAM,GAAGhD,KAAKC,MAAM,KAAK,KAG7CL,EAAQkD,EAAEC,cAAcC,MAAM,IAC9BlD,GAAa,KAwEDmD,WAAW,4BAEf,0BACI,SAAC,IAAD,CAAQC,QAAQ,YAAYC,KAAK,QAAQC,QAASrD,EAAYwC,GAAI,CAAEC,UAAW,QAA/E,0BAKR,SAAC,IAAD,CAAQU,QAAQ,YAAYC,KAAK,QAAQC,QAAStC,EAAlD","sources":["views/pages/rhino/index.js"],"sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport { Grid, Button, Dialog, DialogActions, DialogContent, DialogTitle, Slide, TextField, MenuItem } from '@mui/material';\r\nimport { useSelector } from 'react-redux';\r\nimport { useState } from 'react';\r\nimport { API_URL } from '../../../utils/axios';\r\nimport { toast } from 'react-toastify';\r\n// import FileInput from \"./components/FileInput\";\r\n\r\nconst index = () => {\r\n    const token = useSelector((state) => state.auth.token);\r\n    const [file, setFile] = useState(null);\r\n    const [fileError, setFileError] = useState(false);\r\n    const handleFile = (e) => {\r\n        if (e.currentTarget.files[0].name.split('.')[1] !== '3dm') {\r\n            return;\r\n        }\r\n        setFile(e.currentTarget.files[0]);\r\n        setFileError(false);\r\n    };\r\n\r\n    const fileUpload = async () => {\r\n        if (!file || file?.name.split('.')[1] !== '3dm') {\r\n            setFileError(true);\r\n            return;\r\n        }\r\n        try {\r\n            const formData = new FormData();\r\n            formData.append('file', file);\r\n            const { data } = await axios.post(`${API_URL}admin/fileUpload?fileName=3dModel`, formData, {\r\n                headers: {\r\n                    Authorization: 'Bearer ' + token\r\n                }\r\n            });\r\n            toast.success(data.data.message);\r\n            setFile(null);\r\n        } catch (err) {\r\n            console.log(err);\r\n        }\r\n    };\r\n\r\n    const handleDownload = async () => {\r\n        try {\r\n            const response = await axios.get(`${API_URL}admin/files/download-grasshopper-script?fileToDownload=3DModel`, {\r\n                responseType: 'arraybuffer',\r\n                headers: {\r\n                    Authorization: `Bearer ${token}` // Replace YOUR_BEARER_TOKEN with the actual token\r\n                }\r\n            });\r\n            console.log(response.data);\r\n            const blob = new Blob([response.data], { type: 'application/octet-stream' });\r\n\r\n            // Create a temporary URL for the blob\r\n            const url = window.URL.createObjectURL(blob);\r\n\r\n            // Create a hidden anchor tag and trigger the download\r\n            const a = document.createElement('a');\r\n            a.style.display = 'none';\r\n            a.href = url;\r\n            a.download = 'u-planometric-R-template-testversion.3dm'; // Replace 'file.3dm' with the desired filename\r\n            document.body.appendChild(a);\r\n            a.click();\r\n\r\n            // Clean up the temporary URL\r\n            window.URL.revokeObjectURL(url);\r\n        } catch (error) {\r\n            console.error('Error downloading the .3dm file:', error);\r\n            // Handle the error, e.g., show an error message to the user\r\n        }\r\n    };\r\n    return (\r\n        <Grid display=\"flex\" justifyContent={'center'} alignItems={'center'} gap={'30px'}>\r\n            <form>\r\n                <h1>Update Rhino Master File</h1>\r\n                {/* <FileInput label=\"Attachment\" error={null} /> */}\r\n                <TextField\r\n                    sx={{ marginTop: '25px' }}\r\n                    id=\"walletAddress\"\r\n                    name=\"walletAddress\"\r\n                    label=\"Select file\"\r\n                    type=\"file\"\r\n                    // value={formik.values.walletAddress}\r\n                    // onChange={formik.handleChange}\r\n                    // error={formik.touched.walletAddress && Boolean(formik.errors.walletAddress)}\r\n                    // helperText={formik.touched.walletAddress && formik.errors.walletAddress}\r\n                    // fullWidth\r\n                    autoComplete=\"given-name\"\r\n                    focused={true}\r\n                    error={fileError}\r\n                    onChange={handleFile}\r\n                    helperText=\"Only 3dm files allowed\"\r\n                />\r\n                <div>\r\n                    <Button variant=\"contained\" size=\"small\" onClick={fileUpload} sx={{ marginTop: '25px' }}>\r\n                        Update\r\n                    </Button>\r\n                </div>\r\n            </form>\r\n            <Button variant=\"contained\" size=\"large\" onClick={handleDownload}>\r\n                Download Current File\r\n            </Button>\r\n        </Grid>\r\n    );\r\n};\r\n\r\nexport default index;\r\n"],"names":["token","useSelector","state","auth","useState","file","setFile","fileError","setFileError","fileUpload","name","split","formData","FormData","append","axios","API_URL","headers","Authorization","data","toast","message","console","log","handleDownload","a","responseType","response","blob","Blob","type","url","window","URL","createObjectURL","document","createElement","style","display","href","download","body","appendChild","click","revokeObjectURL","error","justifyContent","alignItems","gap","sx","marginTop","id","label","autoComplete","focused","onChange","e","currentTarget","files","helperText","variant","size","onClick"],"sourceRoot":""}