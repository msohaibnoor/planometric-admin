"use strict";(self.webpackChunkberry_material_react=self.webpackChunkberry_material_react||[]).push([[362],{26362:function(e,n,r){r.r(n),r.d(n,{default:function(){return g}});var t=r(15861),a=r(29439),o=r(87757),i=r.n(o),l=r(72791),s=r(74569),c=r.n(s),d=r(89731),u=r(61889),p=r(56689),f=r(24518),h=r(66934),v=r(80184),m=((0,h.ZP)((function(e){return{field:{"& .MuiFormLabel-root.Mui-disabled":{color:e.palette.text.secondary}},button:{width:"100%",height:"100%",overflow:"hidden"}}})),r(16030)),w=r(75985),g=function(){var e=(0,m.v9)((function(e){return e.auth.token})),n=(0,l.useState)(null),r=(0,a.Z)(n,2),o=r[0],s=r[1],h=(0,l.useState)(!1),g=(0,a.Z)(h,2),x=g[0],b=g[1],y=function(){var n=(0,t.Z)(i().mark((function n(){var r,t,a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o&&"gh"===(null===o||void 0===o?void 0:o.name.split(".")[1])){n.next=3;break}return b(!0),n.abrupt("return");case 3:return n.prev=3,(r=new FormData).append("file",o),n.next=8,c().post("".concat(d.T,"/admin/gh-upload"),r,{headers:{Authorization:"Bearer "+e}});case 8:t=n.sent,a=t.data,w.Am.success(a.data.message),s(null),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(3),console.log(n.t0);case 17:case"end":return n.stop()}}),n,null,[[3,14]])})));return function(){return n.apply(this,arguments)}}(),k=function(){var n=(0,t.Z)(i().mark((function n(){var r,t,a,o,l,s,u,p,f,h;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,c().get("".concat(d.T,"/admin/files/download-grasshopper-script?fileToDownload=grasshopper"),{responseType:"json",headers:{Authorization:"Bearer ".concat(e)}});case 3:for(a=n.sent,o=atob(null===a||void 0===a||null===(r=a.data)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.pdfFile),l=new Array(o.length),s=0;s<o.length;s++)l[s]=o.charCodeAt(s);u=new Uint8Array(l),p=new Blob([u],{type:"application/pdf"}),f=window.URL.createObjectURL(p),(h=document.createElement("a")).style.display="none",h.href=f,h.download=a.data.data.fileName,document.body.appendChild(h),h.click(),window.URL.revokeObjectURL(f),n.next=23;break;case 19:n.prev=19,n.t0=n.catch(0),w.Am.error("Couldn't find the file on server!"),console.error("Error downloading the .3dm file:",n.t0);case 23:case"end":return n.stop()}}),n,null,[[0,19]])})));return function(){return n.apply(this,arguments)}}();return(0,v.jsxs)(u.ZP,{display:"flex",justifyContent:"center",alignItems:"center",gap:"30px",children:[(0,v.jsxs)("form",{children:[(0,v.jsx)("h1",{children:"Update Grasshopper script"}),(0,v.jsx)(p.Z,{sx:{marginTop:"25px"},id:"walletAddress",name:"walletAddress",label:"Select script",type:"file",error:x,autoComplete:"given-name",focused:!0,onChange:function(e){var n,r;"gh"===(null===(n=e.currentTarget.files[0])||void 0===n||null===(r=n.name)||void 0===r?void 0:r.split(".")[1])&&(s(e.currentTarget.files[0]),b(!1))},helperText:"only .gh files allowed"}),(0,v.jsx)("div",{children:(0,v.jsx)(f.Z,{variant:"contained",size:"small",onClick:y,sx:{marginTop:"25px"},children:"Update"})})]}),(0,v.jsx)(f.Z,{variant:"contained",size:"large",onClick:k,children:"Download Current File"})]})}}}]);
//# sourceMappingURL=362.aa7b5aa4.chunk.js.map