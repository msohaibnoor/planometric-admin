"use strict";(self.webpackChunkberry_material_react=self.webpackChunkberry_material_react||[]).push([[429],{35429:function(e,t,n){n.r(t);var r=n(15861),a=n(29439),s=n(87757),c=n.n(s),o=n(72791),l=n(74569),i=n.n(l),d=n(61889),u=n(56689),p=n(24518),f=n(16030),h=n(89731),m=n(75985),v=n(80184);t.default=function(){var e=(0,f.v9)((function(e){return e.auth.token})),t=(0,o.useState)(null),n=(0,a.Z)(t,2),s=n[0],l=n[1],x=(0,o.useState)(!1),w=(0,a.Z)(x,2),b=w[0],g=w[1],k=function(){var t=(0,r.Z)(c().mark((function t(){var n,r,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s&&"csv"===(null===s||void 0===s?void 0:s.name.split(".")[1])){t.next=3;break}return g(!0),t.abrupt("return");case 3:return t.prev=3,(n=new FormData).append("file",s),t.next=8,i().post("".concat(h.T,"admin/trees-upload"),n,{headers:{Authorization:"Bearer "+e}});case 8:r=t.sent,a=r.data,m.Am.success(a.data.message),l(null),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(3),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[3,14]])})));return function(){return t.apply(this,arguments)}}(),y=function(){var t=(0,r.Z)(c().mark((function t(){var n,r,a,s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i().get("".concat(h.T,"admin/files/download-grasshopper-script?fileToDownload=trees"),{responseType:"arraybuffer",headers:{Authorization:"Bearer ".concat(e)}});case 3:n=t.sent,console.log(n.data),r=new Blob([n.data],{type:"application/octet-stream"}),a=window.URL.createObjectURL(r),(s=document.createElement("a")).style.display="none",s.href=a,s.download="trees-database.csv",document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(a),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),console.error("Error downloading the .3dm file:",t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(){return t.apply(this,arguments)}}();return(0,v.jsxs)(d.ZP,{display:"flex",justifyContent:"center",alignItems:"center",gap:"30px",children:[(0,v.jsxs)("form",{children:[(0,v.jsx)("h1",{children:"Update Trees database"}),(0,v.jsx)(u.Z,{sx:{marginTop:"25px"},id:"walletAddress",name:"walletAddress",label:"Select file",type:"file",autoComplete:"given-name",focused:!0,error:b,onChange:function(e){"csv"===e.currentTarget.files[0].name.split(".")[1]&&(l(e.currentTarget.files[0]),g(!1))},helperText:"Only .csv files allowed"}),(0,v.jsx)("div",{children:(0,v.jsx)(p.Z,{variant:"contained",size:"small",onClick:k,sx:{marginTop:"25px"},children:"Update"})})]}),(0,v.jsx)(p.Z,{variant:"contained",size:"large",onClick:y,children:"Download Current File"})]})}}}]);
//# sourceMappingURL=429.545024e2.chunk.js.map